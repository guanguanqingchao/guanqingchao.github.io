# 一、 Web浏览器生成消息
## 生成http请求消息
- 浏览器解析网址，生成http消息。URI，http，请求行，消息体，状态码，

      http://user:password@www.glasscom.com:80/dir/file1.html
      协议   用户密码可省略   web服务器域名    端口号可省略   文件路径
      
      端口号可以识别到某台具体计算机上的具体套接字
      
      
      http://www.lab.glasscom.com/dir1/file1.html
                      |
                  web服务器名
                  
## dns服务器查询ip地址
- TCP/IP 网络是通过 IP 地址来确定通信对象，ip地址就是服务器的位置

      IP地址是一串32位比特的数字【4字节】，按照8比特为一组分成四组，分别用十进制表示 然后再用圆点隔开
      
      IP主体的表示方法
      10.11.12.13
      
      采用与IP地址主题相同的格式表示子网掩码
      10.11.12.13/255.255.255.0
                     子网掩码
      采用网络号比特数来表示子网掩码的方法
      10.11.12.13/24
                  子网掩码
      表示子网的地址
      10.11.12.13.0 /24
                  | 
                  主机号部分比特全部为0，这个地址表示的不是单独一台计算机，而是整个子网
      表示子网内广播的地址
      10.11.12.13.255 /24
                   |
                   主机部分比特全部为1，这个地址表示对整个子网进行广播
      子网掩码是一 串与 IP 地址长度相同的 32 比特数字，其左边一半都是 1，右边一半都是0。其中，子网掩码为 1 的部分表示网络号，子网掩码为 0 的部分表       示主机号。将子网掩码按照和IP 地址一样的方式以每 8 比特为单位用圆点分组后 写在 IP 地址的右侧，
      
- DNS域名解析，Socket 库提供查询 IP 地址的功能

      浏览器调用解析器，解析器会将取出的 IP 地址写入应 用程序指定的内存地址中
      
- 全世界DNS服务器大接力
      
      DNS 服务器中的所有信息都是按照域名以分层次的结构来保存的
      DNS 中的域名都是用句点来分隔的，比如 www.lab.glasscom.com，这 里的句点代表了不同层次之间的界限
      在域名中，越靠右的 位置表示其层级越高，com 域的下一层是 glasscom 域，再下一层是 lab 域，再下面才是 www 这个名字。
      一个域的信息是作为一个整体存 放在 DNS 服务器中的，不能将一个域拆开来存放在多台 DNS 服务器中
      如何找到 DNS 服务器中存放的信息。这里的关键在于 如何找到我们要访问的 Web 服务器的信息归哪一台 DNS 服务器管。
      
      首先，将负责管理下级域的 DNS 服务器的 IP 地址注 册到它们的上级 DNS 服务器中，然后上级 DNS 服务器的 IP 地址再注册到 更上一级的 DNS 服务器         中，以此类推
      
      负责管理 lab.glasscom.com 这个域的 DNS 服务器的 IP 地址需要注册到 glasscom.com 域的 DNS 服务器中，而 glasscom.com 域的 DNS 服务器的       IP 地址又需要注册到 com 域的 DNS 服务器中。这样，我们就可以通过上级 DNS 服务器查询出下级 DNS 服务器的 IP 地址，也就可以向下级 DNS 服务器发       送查询请求了。
      
      在互联网 中，com 和 jp 的上面还有一级域，称为根域。由于上级 DNS 服务器保管着所有下级 DNS 服务器的信息，所以我们可以从根域开始一路往下顺藤摸瓜       找到任意 一个域的 DNS 服务器。
      
      根域的 DNS 服务器信息保 存在互联网中所有的 DNS 服务器中，分配给根域 DNS 服务器 的 IP 地址在全世界仅有 13 个 A，而且这些地址几乎不发生变化，
      
      如果要查询的域名和相关信息已 经在缓存中，那么就可以直接返回响应，接下来的查询可以从缓存的位置开 始向下进行。相比每次都从根域找起来说，缓存可以减       少查询所需的时间
      
## 委托操作系统 协议栈发送消息

      1. 管道两端的出入口称套接字。首先，服务器一方 先创建套接字，然后等待客户端向该套接字连接管道，当服务器进入等待状态时，客户端就可以连接管道了。具          体来说，客户端也会先创建一个套接字，然后从该套接字延伸出管道，最后管道连接到服务器端的套接字上。 当双方的套接字连接起来之后，通信准备就完成            了。接下来只要将数据送入套接字就可以收发数据了
      2. 当数据全部发送完毕之 后，连接的管道将会被断开。管道在连接时是由客户端发起的，但在断开 时可以由客户端或服务器任意一方发起 A。其中一方断开后，          另一方也会随之 断开，当管道断开后，套接字也会被删除。到此为止，通信操作就结束了
         
          Socket 库
         (1)创建套接字(创建套接字阶段) 
         (2)将管道连接到服务器端的套接字上(连接阶段) connect
         (3)收发数据(通信阶段) write read
         (4)断开管道并删除套接字(断开阶段) close
                                                                                               

# 二、协议栈 网卡： 用电信号传输TCP/IP数据




# 集线器 交换机 路由器：从网线到望楼设备
# 接入网 网络运营商：通过接入网进入互联网内部
# 防火墙 缓存服务器：服务端局域网的玄机
# web服务器
